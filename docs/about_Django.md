# Djangoの全て

## Django概要

DjangoはPython製のWebアプリケーションフレームワークで、迅速な開発と保守性の高い設計を重視しています。

### 強み
- **開発効率が高い**: 管理画面や認証機能など多くの機能が標準搭載されており、少ないコードで本格的なWebアプリを構築可能。
- **セキュリティ重視**: CSRF対策やXSS防止、SQLインジェクション対策などがデフォルトで組み込まれている。
- **拡張性・柔軟性**: プラグインやサードパーティ製パッケージが豊富で、APIや非同期処理にも対応。
- **ドキュメントが充実**: 公式ドキュメントやコミュニティが活発で、情報が入手しやすい。

### 弱み
- **学習コスト**: MTVアーキテクチャや独自の設定が多く、初心者にはやや取っ付きにくい。
- **パフォーマンス**: 超大規模・高トラフィック用途では、Node.jsやGoなど他の技術に比べてパフォーマンス面で劣る場合がある。
- **フロントエンドとの統合**: SPAや最新のフロントエンド技術との統合には追加設定や工夫が必要。

---

## 1. バックエンド

- **MVCアーキテクチャ**（DjangoではMTV: Model-Template-View）
    - **Model**: Pythonクラスでデータベース構造を定義。Django ORMによりSQLを意識せず操作可能。
    - **Template**: HTMLテンプレートで動的なWebページを生成。テンプレートタグやフィルタでロジックを記述。
    - **View**: リクエストを受けてレスポンスを返す関数やクラス。ビジネスロジックやデータ取得を担当。
- **管理画面**: `python manage.py createsuperuser`で管理者作成、`admin.py`でモデルを登録すると自動で管理UI生成。
- **認証・認可**: `django.contrib.auth`でユーザー登録・ログイン・パスワード管理、グループやパーミッション設定も可能。
- **マイグレーション**: `makemigrations`/`migrate`コマンドでDBスキーマ変更を安全に管理。バージョン管理も可能。
- **シグナル**: モデルの保存・削除時に自動処理を追加できる（例：ユーザー作成時にプロフィール自動生成）。
- **カスタムコマンド**: 独自の管理コマンドを作成し、バッチ処理や定期実行が可能。

## 2. フロントエンド

- **テンプレートエンジン**: `{% %}`や`{{ }}`で制御構文や変数展開。カスタムテンプレートタグも作成可能。
- **静的ファイル管理**: `STATICFILES_DIRS`や`collectstatic`でCSS/JS/画像を一元管理。開発・本番での配信切替も容易。
- **フォーム**: `forms.py`でフォーム定義。バリデーションやエラーメッセージ自動処理。CSRFトークン自動挿入。
- **メッセージフレームワーク**: ユーザーへの通知やエラーメッセージを簡単に表示できる。
- **多言語対応**: `gettext`を使った国際化・多言語化が容易。

## 3. Web API

- **Django REST framework（DRF）**: シリアライザーでモデル⇔JSON変換、ViewSet/RouterでAPI自動生成。
- **API認証**: トークン認証（TokenAuthentication）、OAuth2、JWTなど多様な認証方式に対応。
- **パーミッション**: APIごとにアクセス制御（IsAuthenticated, IsAdminUser等）を柔軟に設定可能。
- **スロットリング・ページネーション**: リクエスト制限や大量データの分割取得も標準サポート。
- **APIドキュメント自動生成**: SwaggerやRedocなどと連携し、API仕様書を自動生成可能。

---

# Django 4.2 と 5.2 の違い

| 機能/変更点                | Django 4.2（LTS）         | Django 5.2（最新）         |
|---------------------------|--------------------------|---------------------------|
| サポートPythonバージョン   | 3.8, 3.9, 3.10, 3.11     | 3.10, 3.11, 3.12          |
| 型ヒント                   | 一部導入                 | 公式で広範囲に型ヒント対応 |
| フォーム                   | 旧来のバリデーション      | 新しいフォームAPI改善     |
| データベースバックエンド   | MySQL, PostgreSQL, SQLite| MariaDB 11, 新機能追加    |
| 非同期対応                 | 一部（ASGIサポート）      | より多くの非同期機能      |
| 廃止・削除                 | 古いAPIの警告            | 古いAPIの削除             |
| セキュリティ               | 標準的                   | セキュリティ強化          |

**主なアップデート例（5.2）:**
- **型ヒントの公式サポート拡大**: モデル・ビュー・フォーム等で型ヒントが標準化され、IDE補完や型チェックが強化。
- **非同期ORM操作の強化**: `async`/`await`でDBアクセスやビュー処理がより高速・効率的に。
- **MariaDB 11対応**: 最新DB機能の利用が可能に。
- **古いAPIや設定の削除**: 非推奨だったAPIや設定が完全削除され、コードのモダン化が進行。
- **セキュリティ機能の追加**: Cookie属性の強化やCSRF対策の改善など。

---

## 参考リンク

- [Django公式ドキュメント](https://docs.djangoproject.com/)
- [Django 4.2リリースノート](https://docs.djangoproject.com/en/4.2/releases/4.2/)
- [Django 5.2リリースノート](https://docs.djangoproject.com/en/5.2/releases/5.2/)